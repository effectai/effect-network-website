import{i as y,u as w,a as b,c as m,m as E}from"./i4SHAdbU.js";import{f as k,a1 as I,r as p,M as l,a2 as S,g as B,o as C,c as L,a3 as M,h as v}from"./CkxwMjSb.js";const N=["src"],H=k({__name:"NuxtImg",props:y,emits:["load","error"],setup(f,{emit:g}){const s=f,h=I(),o=g,z=!1,u=w(),r=b(s),n=p(!1),t=p(),i=l(()=>u.getSizes(s.src,{...r.options.value,sizes:s.sizes,densities:s.densities,modifiers:{...r.modifiers.value,width:m(s.width),height:m(s.height)}})),_=l(()=>{const e={...r.attrs.value,"data-nuxt-img":""};return(!s.placeholder||n.value)&&(e.sizes=i.value.sizes,e.srcset=i.value.srcset),e}),c=l(()=>{let e=s.placeholder;if(e===""&&(e=!0),!e||n.value)return!1;if(typeof e=="string")return e;const a=Array.isArray(e)?e:typeof e=="number"?[e,e]:[10,10];return u(s.src,{...r.modifiers.value,width:a[0],height:a[1],quality:a[2]||50,blur:a[3]||3},r.options.value)}),d=l(()=>s.sizes?i.value.src:u(s.src,r.modifiers.value,r.options.value)),A=l(()=>c.value?c.value:d.value),x=S().isHydrating;return B(()=>{if(c.value){const e=new Image;d.value&&(e.src=d.value),s.sizes&&(e.sizes=i.value.sizes||"",e.srcset=i.value.srcset),e.onload=a=>{n.value=!0,o("load",a)},E("nuxt-image");return}t.value&&(t.value.complete&&x&&(t.value.getAttribute("data-error")?o("error",new Event("error")):o("load",new Event("load"))),t.value.onload=e=>{o("load",e)},t.value.onerror=e=>{o("error",e)})}),(e,a)=>(C(),L("img",M({ref_key:"imgEl",ref:t,class:s.placeholder&&!n.value?s.placeholderClass:void 0},{...v(z)?{onerror:"this.setAttribute('data-error', 1)"}:{},..._.value,...v(h)},{src:A.value}),null,16,N))}});export{H as _};
